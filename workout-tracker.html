<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>W1 Mon</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
        }

        html {
            touch-action: pan-y;
            -webkit-text-size-adjust: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: #000;
            color: #fff;
            width: 100vw;
            height: 100vh;
            position: fixed;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            touch-action: none;
        }

        /* Curved top controls */
        .top-controls {
            position: relative;
            height: 80px;
            flex-shrink: 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 0 30px 10px 30px;
            gap: 8px;
        }

        .top-title {
            position: absolute;
            top: 8px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 9px;
            font-weight: 700;
            color: #00ff88;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .progress-bar {
            position: absolute;
            top: 24px;
            left: 30px;
            right: 30px;
            height: 2px;
            background: rgba(255, 255, 255, 0.2);
        }

        .progress-fill {
            height: 100%;
            background: #00ff88;
            transition: width 0.3s ease;
        }

        /* Buttons in curved arrangement */
        .btn {
            padding: 10px 14px;
            border: none;
            border-radius: 20px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            cursor: pointer;
            transition: transform 0.1s ease;
            white-space: nowrap;
        }

        .btn:active {
            transform: scale(0.92);
        }

        .btn-primary {
            background: #00ff88;
            color: #000;
            padding: 12px 20px;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
        }

        .btn-pause {
            background: rgba(255, 193, 7, 0.25);
            color: #ffc107;
            border: 1px solid rgba(255, 193, 7, 0.4);
        }

        /* Main content - centered */
        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0 35px 60px 35px;
            overflow: hidden;
        }

        .phase {
            font-size: 9px;
            font-weight: 700;
            color: #00ff88;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
            text-align: center;
        }

        .exercise-name {
            font-size: 17px;
            font-weight: 700;
            text-align: center;
            line-height: 1.2;
            margin-bottom: 12px;
        }

        .exercise-sets {
            font-size: 28px;
            font-weight: 900;
            color: #00ff88;
            text-align: center;
            margin: 10px 0;
        }

        .exercise-weight {
            font-size: 14px;
            color: #00ccff;
            text-align: center;
            margin-top: 5px;
        }

        .exercise-notes {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.75);
            text-align: center;
            line-height: 1.4;
            margin-top: 12px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            max-width: 100%;
        }

        .timer {
            font-size: 64px;
            font-weight: 900;
            color: #00ccff;
            text-align: center;
            margin: 15px 0;
            font-variant-numeric: tabular-nums;
            letter-spacing: -3px;
        }

        .timer-label {
            font-size: 9px;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.5);
            text-align: center;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .next {
            margin-top: 15px;
            padding: 8px 14px;
            background: rgba(0, 204, 255, 0.15);
            border: 1px solid rgba(0, 204, 255, 0.35);
            border-radius: 8px;
            text-align: center;
            max-width: 100%;
        }

        .next-label {
            font-size: 8px;
            color: #00ccff;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .next-text {
            font-size: 12px;
            font-weight: 600;
            color: #fff;
        }

        .completion {
            text-align: center;
            padding: 20px;
        }

        .completion-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .completion-title {
            font-size: 18px;
            font-weight: 800;
            margin-bottom: 10px;
        }

        .completion-msg {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.75);
            line-height: 1.5;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="top-controls">
        <div class="top-title">W1 MON â€¢ STRENGTH A</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>
        <button class="btn btn-secondary hidden" id="skipBtn">Skip</button>
        <button class="btn btn-pause hidden" id="pauseBtn">Pause</button>
        <button class="btn btn-primary" id="nextBtn">Start</button>
    </div>

    <div class="content" id="content"></div>

    <script>
        var workout = {
            warmup: [
                { phase: "Mobility 1/5", name: "Seal â†’ Down Dog", duration: 60, notes: "5 reps â€¢ 5s hold each" },
                { phase: "Mobility 2/5", name: "World's Greatest", duration: 75, notes: "5 each side" },
                { phase: "Mobility 3/5", name: "Hip 90-90", duration: 45, notes: "8 each side" },
                { phase: "Mobility 4/5", name: "Shoulder Pass", duration: 30, notes: "10 reps wide grip" },
                { phase: "Mobility 5/5", name: "Thoracic Rotations", duration: 30, notes: "8 each side" },
                { phase: "Activation 1/5", name: "Machine Cals", duration: 120, notes: "Easy â€¢ HR 120-130" },
                { phase: "Activation 2/5", name: "Goblet Hold", duration: 30, notes: "30s â€¢ Light KB" },
                { phase: "Activation 3/5", name: "Band Pulls", duration: 30, notes: "15 reps" },
                { phase: "Activation 4/5", name: "Glute Bridges", duration: 30, notes: "10 reps â€¢ 2s hold" },
                { phase: "Activation 5/5", name: "Arm Circles", duration: 30, notes: "10 each way" }
            ],
            main: [
                { phase: "Block 1", name: "Goblet Squat", sets: "2 Ã— 8", weight: "Light", rest: 90, notes: "Warm-up. Find depth." },
                { phase: "Block 1", name: "Back Squat", sets: "4 Ã— 8", weight: "60kg", rest: 180, notes: "RPE 6/10 â€¢ Pins set!" },
                { phase: "Block 1", name: "Rest/Setup", duration: 120, notes: "2 min break. Hydrate." },
                { phase: "Block 2", name: "RDL", sets: "3 Ã— 10", weight: "40kg", rest: 180, notes: "SLOW! Feel hamstrings." },
                { phase: "Block 2", name: "Inverted Row", sets: "3 Ã— 10", weight: "BW", rest: 120, notes: "Chest to bar" },
                { phase: "Accessory", name: "DB Press", sets: "3 Ã— 10", weight: "12kg", rest: 120, notes: "Full range" },
                { phase: "Accessory", name: "Plank", sets: "3 Ã— 30s", rest: 90, notes: "Core tight!" },
                { phase: "Finisher", name: "Farmer Walk", sets: "3 Ã— 40m", weight: "Heavy", rest: 120, notes: "Tall posture" }
            ]
        };

        var section = 'warmup';
        var index = 0;
        var timer = null;
        var timeLeft = 0;
        var paused = false;
        var resting = false;

        var nextBtn = document.getElementById('nextBtn');
        var pauseBtn = document.getElementById('pauseBtn');
        var skipBtn = document.getElementById('skipBtn');
        var content = document.getElementById('content');
        var progress = document.getElementById('progress');

        function total() {
            return workout.warmup.length + workout.main.length;
        }

        function current() {
            return section === 'warmup' ? index : workout.warmup.length + index;
        }

        function updateProgress() {
            var pct = (current() / total()) * 100;
            progress.style.width = pct + '%';
        }

        function getEx() {
            return section === 'warmup' ? workout.warmup[index] : workout.main[index];
        }

        function getNext() {
            if (section === 'warmup' && index + 1 < workout.warmup.length) return workout.warmup[index + 1];
            if (section === 'warmup') return workout.main[0];
            if (index + 1 < workout.main.length) return workout.main[index + 1];
            return null;
        }

        function show() {
            var ex = getEx();
            var next = getNext();
            var html = '<div class="phase">' + ex.phase + '</div>' +
                '<div class="exercise-name">' + ex.name + '</div>';

            if (ex.duration) {
                html += '<div class="timer-label">Duration</div>' +
                    '<div class="timer" id="timer">' + fmt(ex.duration) + '</div>';
            } else {
                html += '<div class="exercise-sets">' + ex.sets + '</div>';
                if (ex.weight) html += '<div class="exercise-weight">ðŸ’ª ' + ex.weight + '</div>';
            }

            if (ex.notes) html += '<div class="exercise-notes">' + ex.notes + '</div>';

            if (next) {
                html += '<div class="next"><div class="next-label">Next</div>' +
                    '<div class="next-text">' + next.name + '</div></div>';
            }

            content.innerHTML = html;
            updateProgress();

            if (ex.duration) {
                startTimer(ex.duration);
                nextBtn.textContent = 'Next';
                pauseBtn.classList.remove('hidden');
                skipBtn.classList.remove('hidden');
            } else if (!resting) {
                nextBtn.textContent = 'Done';
                pauseBtn.classList.add('hidden');
                skipBtn.classList.add('hidden');
            }
        }

        function showRest(dur) {
            resting = true;
            content.innerHTML = '<div class="phase">Rest Period</div>' +
                '<div class="exercise-name">Recover</div>' +
                '<div class="timer-label">Time Left</div>' +
                '<div class="timer" id="timer">' + fmt(dur) + '</div>' +
                '<div class="exercise-notes">Get ready</div>';
            startTimer(dur);
            nextBtn.textContent = 'Skip';
            pauseBtn.classList.remove('hidden');
            skipBtn.classList.add('hidden');
        }

        function fmt(s) {
            var m = Math.floor(s / 60);
            var sec = s % 60;
            return m + ':' + (sec < 10 ? '0' : '') + sec;
        }

        function startTimer(dur) {
            timeLeft = dur;
            updateTimer();
            if (timer) clearInterval(timer);
            timer = setInterval(function() {
                if (!paused) {
                    timeLeft--;
                    updateTimer();
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        beep();
                        if (resting) {
                            resting = false;
                            show();
                        } else {
                            next();
                        }
                    }
                }
            }, 1000);
        }

        function updateTimer() {
            var t = document.getElementById('timer');
            if (t) t.textContent = fmt(timeLeft);
        }

        function beep() {
            if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
        }

        function next() {
            if (resting) {
                clearInterval(timer);
                resting = false;
                show();
                return;
            }

            if (section === 'warmup') {
                index++;
                if (index >= workout.warmup.length) {
                    section = 'main';
                    index = 0;
                }
                show();
            } else {
                var ex = getEx();
                if (ex.rest) {
                    showRest(ex.rest);
                } else {
                    index++;
                    if (index >= workout.main.length) {
                        done();
                    } else {
                        show();
                    }
                }
            }
        }

        function togglePause() {
            paused = !paused;
            pauseBtn.textContent = paused ? 'Resume' : 'Pause';
            pauseBtn.style.background = paused ? 'rgba(0, 255, 136, 0.2)' : 'rgba(255, 193, 7, 0.25)';
        }

        function done() {
            content.innerHTML = '<div class="completion">' +
                '<div class="completion-icon">ðŸ‡§ðŸ‡¬ðŸ’ª</div>' +
                '<div class="completion-title">W1 Mon Done!</div>' +
                '<div class="completion-msg">HR under 165.<br>Walk home = cool-down.<br><br>Bulgaria is lucky to have you.</div>' +
                '</div>';
            nextBtn.textContent = 'Finish';
            pauseBtn.classList.add('hidden');
            skipBtn.classList.add('hidden');
            progress.style.width = '100%';
        }

        nextBtn.addEventListener('click', function() {
            if (nextBtn.textContent === 'Start') {
                show();
            } else if (nextBtn.textContent === 'Finish') {
                if (confirm('Restart workout?')) location.reload();
            } else {
                next();
            }
        });

        pauseBtn.addEventListener('click', togglePause);
        skipBtn.addEventListener('click', function() {
            clearInterval(timer);
            next();
        });

        // Prevent zoom
        document.addEventListener('gesturestart', function(e) { e.preventDefault(); });
        document.addEventListener('gesturechange', function(e) { e.preventDefault(); });
        document.addEventListener('gestureend', function(e) { e.preventDefault(); });
        
        var lastTouch = 0;
        document.addEventListener('touchend', function(e) {
            var now = Date.now();
            if (now - lastTouch <= 300) e.preventDefault();
            lastTouch = now;
        }, false);
        
        document.addEventListener('touchmove', function(e) {
            if (e.touches.length > 1) e.preventDefault();
        }, { passive: false });

        // Prevent reload
        window.addEventListener('beforeunload', function(e) {
            if (section !== 'warmup' || index > 0) {
                e.preventDefault();
                e.returnValue = '';
                return '';
            }
        });

        updateProgress();
    </script>
</body>
</html>
